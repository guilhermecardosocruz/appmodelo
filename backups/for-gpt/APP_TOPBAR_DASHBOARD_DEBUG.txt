
===== components/AppTopbar.tsx =====
1 import Link from "next/link";
2 import { ThemeToggle } from "@/components/theme/ThemeToggle";
3 
4 export function AppTopbar() {
5   return (
6     <header className="fixed inset-x-0 top-0 z-50 border-b border-slate-200/60 bg-white/85 backdrop-blur dark:border-slate-800/60 dark:bg-slate-950/80">
7       <div className="mx-auto flex h-14 max-w-6xl items-center justify-between px-4">
8         <Link
9           href="/"
10           className="text-sm font-semibold text-slate-900 hover:opacity-80 dark:text-slate-50"
11         >
12           Eventos
13         </Link>
14 
15         <div className="flex items-center gap-2">
16           <ThemeToggle />
17         </div>
18       </div>
19     </header>
20   );
21 }

===== app/(app)/dashboard/DashboardClient.tsx =====
1 "use client";
2 
3 import { useEffect, useState } from "react";
4 import { useRouter } from "next/navigation";
5 import Link from "next/link";
6 import { ThemeToggle } from "@/components/theme/ThemeToggle";
7 
8 type EventType = "PRE_PAGO" | "POS_PAGO" | "FREE";
9 
10 type Event = {
11   id: string;
12   name: string;
13   type: EventType;
14   createdAt: string;
15 };
16 
17 function getTypeLabel(type: EventType) {
18   if (type === "PRE_PAGO") return "Pré pago";
19   if (type === "POS_PAGO") return "Pós pago";
20   return "Free";
21 }
22 
23 function getEventHref(event: Event) {
24   if (event.type === "PRE_PAGO") return `/eventos/${event.id}/pre`;
25   if (event.type === "POS_PAGO") return `/eventos/${event.id}/pos`;
26   return `/eventos/${event.id}/free`;
27 }
28 
29 export default function DashboardClient() {
30   const router = useRouter();
31 
32   const [events, setEvents] = useState<Event[]>([]);
33   const [loading, setLoading] = useState(true);
34   const [error, setError] = useState<string | null>(null);
35 
36   const [name, setName] = useState("");
37   const [type, setType] = useState<EventType>("FREE");
38   const [creating, setCreating] = useState(false);
39 
40   useEffect(() => {
41     let active = true;
42 
43     async function load() {
44       try {
45         setLoading(true);
46         setError(null);
47 
48         const res = await fetch("/api/events");
49         if (!res.ok) {
50           const data = await res.json().catch(() => null);
51           if (!active) return;
52           setError(data?.error ?? "Erro ao carregar eventos.");
53           return;
54         }
55 
56         const data = (await res.json()) as Event[];
57         if (!active) return;
58         setEvents(data);
59       } catch (err) {
60         console.error(err);
61         if (!active) return;
62         setError("Erro inesperado ao carregar eventos.");
63       } finally {
64         if (!active) return;
65         setLoading(false);
66       }
67     }
68 
69     void load();
70 
71     return () => {
72       active = false;
73     };
74   }, []);
75 
76   async function handleCreate(e: React.FormEvent) {
77     e.preventDefault();
78     if (!name.trim()) {
79       setError("Informe um nome para o evento.");
80       return;
81     }
82 
83     try {
84       setCreating(true);
85       setError(null);
86 
87       const res = await fetch("/api/events", {
88         method: "POST",
89         headers: {
90           "Content-Type": "application/json",
91         },
92         body: JSON.stringify({
93           name,
94           type,
95         }),
96       });
97 
98       if (!res.ok) {
99         const data = await res.json().catch(() => null);
100         setError(data?.error ?? "Erro ao criar evento.");
101         return;
102       }
103 
104       const created = (await res.json()) as Event;
105 
106       setEvents((prev) => [created, ...prev]);
107       setName("");
108       setType("FREE");
109     } catch (err) {
110       console.error(err);
111       setError("Erro inesperado ao criar evento.");
112     } finally {
113       setCreating(false);
114     }
115   }
116 
117   async function handleDelete(id: string) {
118     try {
119       setError(null);
120 
121       const res = await fetch("/api/events", {
122         method: "DELETE",
123         headers: {
124           "Content-Type": "application/json",
125         },
126         body: JSON.stringify({ id }),
127       });
128 
129       if (!res.ok) {
130         const data = await res.json().catch(() => null);
131         setError(data?.error ?? "Erro ao excluir evento.");
132         return;
133       }
134 
135       setEvents((prev) => prev.filter((e) => e.id !== id));
136     } catch (err) {
137       console.error(err);
138       setError("Erro inesperado ao excluir evento.");
139     }
140   }
141 
142   return (
143     <div className="min-h-screen bg-slate-950 text-slate-50 flex flex-col">
144       <header className="flex items-center justify-between px-6 py-4 border-b border-slate-800">
145         <h1 className="text-lg sm:text-xl font-semibold">Meus eventos</h1>
146 
147         <div className="flex items-center gap-3">
148           <ThemeToggle />
149           <Link
150             href="/ingressos"
151             className="text-xs font-medium text-emerald-300 hover:text-emerald-200"
152           >
153             Meus ingressos
154           </Link>
155           <button
156             type="button"
157             className="text-xs font-medium text-slate-300 hover:text-slate-100"
158           >
159             Sair
160           </button>
161         </div>
162       </header>
163 
164       <main className="flex-1 px-4 py-6 sm:px-6 lg:px-8 max-w-5xl w-full mx-auto flex flex-col gap-6">
165         <form
166           onSubmit={handleCreate}
167           className="flex flex-col gap-3 rounded-2xl border border-slate-800 bg-slate-900/50 p-4 sm:flex-row sm:items-end sm:gap-4"
168         >
169           <div className="flex-1 flex flex-col gap-1">
170             <label className="text-xs font-medium text-slate-300">
171               Nome do evento
172             </label>
173             <input
174               type="text"
175               value={name}
176               onChange={(e) => setName(e.target.value)}
177               className="rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500"
178               placeholder="Digite o nome do evento"
179             />
180           </div>
181 
182           <div className="w-full sm:w-40 flex flex-col gap-1">
183             <label className="text-xs font-medium text-slate-300">Tipo</label>
184             <select
185               value={type}
186               onChange={(e) => setType(e.target.value as EventType)}
187               className="rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500"
188             >
189               <option value="FREE">Free</option>
190               <option value="PRE_PAGO">Pré pago</option>
191               <option value="POS_PAGO">Pós pago</option>
192             </select>
193           </div>
194 
195           <button
196             type="submit"
197             disabled={creating}
198             className="inline-flex items-center justify-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 disabled:opacity-60"
199           >
200             {creating ? "Criando..." : "Adicionar evento"}
201           </button>
202         </form>
203 
204         {error && <p className="text-sm text-red-400">{error}</p>}
205 
206         {loading && (
207           <p className="text-sm text-slate-300">Carregando eventos...</p>
208         )}
209 
210         {!loading && events.length === 0 && (
211           <p className="text-sm text-slate-400">
212             Nenhum evento criado ainda. Crie o primeiro acima.
213           </p>
214         )}
215 
216         <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
217           {events.map((event) => (
218             <div
219               key={event.id}
220               onClick={() => router.push(getEventHref(event))}
221               className="flex flex-col gap-2 rounded-2xl border border-slate-800 bg-slate-900/60 p-4 cursor-pointer hover:border-emerald-500/70 hover:bg-slate-800/60 transition"
222             >
223               <div className="flex items-center justify-between gap-2">
224                 <span className="text-[11px] uppercase tracking-wide text-slate-400">
225                   {getTypeLabel(event.type)}
226                 </span>
227 
228                 <button
229                   type="button"
230                   onClick={(e) => {
231                     e.stopPropagation();
232                     const confirmed = window.confirm(
233                       "Deseja realmente excluir este evento? Essa ação não pode ser desfeita.",
234                     );
235                     if (!confirmed) return;
236                     void handleDelete(event.id);
237                   }}
238                   className="inline-flex items-center justify-center rounded-lg border border-red-600 px-2.5 py-1 text-[11px] font-medium text-red-400 hover:bg-red-950/50"
239                 >
240                   Excluir
241                 </button>
242               </div>
243 
244               <h2 className="text-sm font-semibold text-slate-50 line-clamp-2">
245                 {event.name}
246               </h2>
247             </div>
248           ))}
249         </div>
250       </main>
251     </div>
252   );
253 }

===== app/(app)/dashboard/page.tsx =====
1 import DashboardClient from "./DashboardClient";
2 
3 export default function DashboardPage() {
4   return <DashboardClient />;
5 }
